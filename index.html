<html>
	<head>
		<title>Quiz App</title>
		<style type="text/css">
			body{
				font-family: arial;
				background: #333333;
			}
			#quizzed{
				color: white;
				text-align: center;
				width: 50em;
				margin-left: auto;
				margin-right: auto;
			}
			.answer{
				border: 2px solid #3399FF;
				background: #666666;
				color: white;
				cursor: pointer;
				padding: 15px;
				float: left;
				font-size: 16px;
				font-weight: bold;
				margin: 5px;
				width: 25%;
				height: 33px;
				text-align: center;
				vertical-align: middle;
			}
			.answer:hover{
				background-color: #999999;
			}

			.winner-introduction{
				font-size: 18px;
			}

			.winner{
				color: #3399FF;
				font-size: 60px;
				font-weight: bold;
				margin: 10px;
				margin-top: 5px;
			}

			.winner-desc{
				color: #CCCCCC;
				width: 30em;
				text-align: center;
				margin-left: 30px;
			}

			.winner-img{
				margin-top: 40px;
				float: right;
				width: 250px;
			}
		</style>
		<script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
		<script>
			window.Quizzed = (function( $ ){

				var obj = {};
				var score = {};
				var counter = 0;
				var questions = [];
				var types = {};
				var typeArr = [];

				obj.init = function( args ){

					data = args;
					questions = args.questions;
					types = args.types;

					obj.findTeams();
					obj.draw( counter );
				}

				obj.findTeams = function(){

					var qCount = questions.length;
					for( var i = 0; i < qCount; i++ ){
						var answers = questions[i].answers;
						var aCount = answers.length;
						for( var t = 0; t < aCount; t++ ){
							var types = answers[t].type;
							if( typeof types == 'string' ){
								types = [ types ];
							}

							var tCount = types.length;
							for( var m = 0; m < tCount; m++ ){
								if( typeof score[types[m] ] == 'undefined' ){
									score[ types[m] ] = 0;
									typeArr.push( types[m] );
								}
							}
						}
					}

				}

				obj.clickHandler = function(){

					var type = $(this).data( 'type' );

					if( type.indexOf(',') ){
						type = type.split(',');
					}else{
						type = [ type ];
					}

					var count = type.length;
					for( var i = 0; i < count; i++ ){
						score[ type[i] ] = score[ type[i] ] + 1;
					}

					counter = counter + 1;
					if( counter == questions.length ){
						obj.finishGame();
					}else{
						obj.draw( counter );
					}

				}

				obj.draw = function( number ){

					var main = $("#quizzed");
					main.html("");

					var question = questions[ number ].question;
					var answers = questions[ number ].answers;

					$( '<div/>', {
						'class' : 'question',
						'text' : question
					}).appendTo(main);

					answers = shuffleArray( answers );
					var count = answers.length;
					for( var i = 0; i < count; i++ ){
						var item = answers[i];
						$( '<div/>', {
							'class' : 'answer',
							'data-type' : item.type,
							'html' : item.text,
							'click' : obj.clickHandler,
						}).appendTo(main);
					}

				}

				obj.finishGame = function(){

					var main = $("#quizzed");
					main.html("");

					names = shuffleArray( typeArr );
					var topScore = 0;
					var winner = '';
					var count = names.length;
					for( var i = 0; i < count; i++ ){
						var number = score[ names[i] ];
						console.log( number );
						if( number > topScore ){
							topScore = number;
							winner = names[i];
						}
					}

					var winner = types[winner];

					$( '<img/>', {
						'class' : 'winner-img',
						'src' : winner.img,
					} ).appendTo(main);

					$( '<div/>', {
						'class' : 'winner-introduction',
						'html' : 'You are most similar to...',
					} ).appendTo(main);

					$( '<div/>', {
						'class' : 'winner',
						'html' : winner.name,
					} ).appendTo(main);

					$( '<div/>', {
						'class' : 'winner-desc',
						'html' : winner.desc,
					} ).appendTo(main);

				}

				function shuffleArray(array) {
				    for (var i = array.length - 1; i > 0; i--) {
				        var j = Math.floor(Math.random() * (i + 1));
				        var temp = array[i];
				        array[i] = array[j];
				        array[j] = temp;
				    }
				    return array;
				}

				return obj;
			})(jQuery);
		</script>
	</head>
	<body>
		<div id="quizzed">
		</div>
		<script>
		console.log( window.Quizzed );
		window.Quizzed.init({
			"questions": [{
				"question": "If you could go anywhere on vacation, where would you go?",
				"answers" : [
					{ "text": "Seattle", "type": "tyler" },
					{ "text": "Hawaii", "type": [ "mason", "kailey" ] },
					{ "text": "Del Mar", "type": "allan" },
					{ "text": "Paris", "type": ["sierra", "jesalyn"] },
					{ "text": "Australia", "type": "robbie" },
					{ "text": "Tahiti", "type": "emily" },
					{ "text": "Bahamas", "type": "jackie" },
					{ "text": "Alaska", "type": "clayton" },
					{ "text": "Yosemite", "type": "janelle" },
					{ "text": "Home....<br> Seriously leave me alone!", "type": "kyle" }
					]
				},
				{
				"question": "What is your favorite type of pokemon?",
				"answers": [
					{ "text": "Snuffleupagus", "type": "kyle" },
					{ "text": "Charzard", "type": "tyler" },
					{ "text": "Eyee", "type": "mason" },
					{ "text": "Pikachu", "type": ["robbie", "allan", "emily", "janelle"] },
					{ "text": "The Super Tiny Pink One", "type": "sierra" },
					{ "text": "Jiggly Puff", "type": ["kailey", "jesalyn"] },
					{ "text": "Whatsa Pokemon?", "type": "jackie" },
					{ "text": "Alakazam", "type": "clayton" },
					]
				},
				{
				"question": "If you could only eat one food for the rest of your life, what would it be?",
				"answers": [
					{ "text": "Can you add bacon to coffee?", "type": "kyle" },
					{ "text": "Pasta Salad", "type": "tyler" },
					{ "text": "Filet Minon", "type": "mason" },
					{ "text": "Tacos", "type": "allan" },
					{ "text": "Pasta", "type": "sierra" },
					{ "text": "Bean & Cheese Burrito", "type": "kailey" },
				{ "text": "California Burrito", "type": "robbie" },
				{ "text": "Sugar Packets", "type": "emily" },
				{ "text": "Ice Cream", "type": "jackie" },
				{ "text": "Crepes", "type": "clayton" },
				{ "text": "Sushi", "type": "janelle" },
				{ "text": "Bread-bowl Clam Chowder", "type": "jesalyn" },
				]
				},
				{
				"question": "Which state do you wish you could kick out of america?",
				"answers": [
					{ "text": "Texas", "type": ["kyle", "jesalyn"] },
					{ "text": "Wyoming", "type": "tyler" },
					{ "text": "Oregon", "type": "mason" },
					{ "text": "Canada", "type": "allan" },
					{ "text": "Missouri", "type": "sierra" },
					{ "text": "Delaware", "type": "kailey" },
					{ "text": "Rhode Island", "type": "robbie" },
					{ "text": "Kansas", "type": "emily" },
					{ "text": "Tennessee", "type": "jackie" },
					{ "text": "Nevada", "type": "clayton" },
					{ "text": "Southern California", "type": "janelle" },
					]
				},
				{
				"question": "Which President would you most like to play disc golf with?",
				"answers": [
					{ "text": "Josiah Bartlet", "type": "kyle" },
					{ "text": "Steve Jobs", "type": "tyler" },
					{ "text": "Abraham Lincoln", "type": ["mason", "clayton"] },
					{ "text": "Ronald Reagan", "type": ["allan", "kailey"] },
					{ "text": "Barrack Obama", "type": ["sierra", "jackie"] },
					{ "text": "George W. Bush", "type": ["robbie", "emily"] },
					{ "text": "JFK", "type": ["janelle", "jesalyn"] },
					]
				},
				{
				"question": "Which weapon would you choose in the case of a zombie apocalypse?",
				"answers": [
					{ "text": "A turkey sandwhich", "type": "kyle" },
					{ "text": "Lightsaber", "type": "tyler" },
					{ "text": "A set of keys", "type": "mason" },
					{ "text": "Hatchet", "type": "allan" },
					{ "text": "Baseball bat", "type": "sierra" },
					{ "text": "Machine Gun", "type": "kailey" },
					{ "text": "Crossbow", "type": "robbie" },
					{ "text": "Cinderella", "type": "emily" },
					{ "text": "Trampoline", "type": "jackie" },
					{ "text": "Chuck Norris", "type": "clayton" },
					{ "text": "Incinerator", "type": "janelle" },
					{ "text": "The Force", "type": "jesalyn" },
					]
				},
				{
				"question": "Go To Kareoke Song?",
				"answers": [
					{ "text": "Wilson Philips \"Hold On\"", "type": "kyle" },
					{ "text": "Lion Kings \"I just cant wait to be king\"", "type": "tyler" },
					{ "text": "Michael Jackson \"Man in the Mirror\"", "type": "mason" },
					{ "text": "Elton John \"Bennie and the Jets\"", "type": "allan" },
					{ "text": "Christina Aguilera \"What a Girl Wants\"", "type": "sierra" },
					{ "text": "Shania Twain \"Man! I feel like a Woman!\"", "type": "kailey" },
					{ "text": "Blink 182 \"All the Small Things\"", "type": "robbie" },
					{ "text": "Don McLein \"American Pie\"", "type": "emily" },
					{ "text": "Tom Petty \"Free Fallin\"", "type": "jackie" },
					{ "text": "Celine Dion \"My Heart will Go On\"", "type": "clayton" },
					{ "text": "Destinys Child \"Survivor\"", "type": "janelle" },
					{ "text": "Michael Jackson \"Thriller\"", "type": "jesalyn" },
					]
				},
				{
				"question": "Last TV Show You Watch All Of?",
				"answers": [
					{ "text": "West Wing", "type": "kyle" },
					{ "text": "30 Rock", "type": "tyler" },
					{ "text": "Avatar: The Last Airbender", "type": "mason" },
					{ "text": "Chuck", "type": "allan" },
					{ "text": "The Bachelor", "type": "sierra" },
					{ "text": "Pretty Little Liars", "type": ["kailey", "jeslayn"] },
					{ "text": "Brooklyn 99", "type": "robbie" },
					{ "text": "Gilmore Girls", "type": "emily" },
					{ "text": "90210", "type": "jackie" },
					{ "text": "The Office", "type": "clayton" },
					{ "text": "I am too good for TV", "type": "janelle" },
					]
				},
				{
				"question": "Favorite Word?",
				"answers": [
					{ "text": "Ineffable", "type": "kyle" },
					{ "text": "Prusumptuous", "type": "tyler" },
					{ "text": "Pallindrome", "type": "mason" },
					{ "text": "Bifurcate", "type": "allan" },
					{ "text": "Bibliography", "type": "sierra" },
					{ "text": "Joy", "type": "kailey" },
					{ "text": "Estacionamiento", "type": "robbie" },
					{ "text": "Boss", "type": "emily" },
					{ "text": "Jump", "type": "jackie" },
					{ "text": "America", "type": "clayton" },
					{ "text": "Gratitude", "type": "janelle" },
					{ "text": "Rocket Science", "type": "jesalyn" },
					]
				},
				{
				"question": "What piece of furniture best describes your personality?",
				"answers": [
					{ "text": "Old Wooden Rocking Chair", "type": "kyle" },
					{ "text": "Porch Swing", "type": "tyler" },
					{ "text": "Love Seat", "type": "mason" },
					{ "text": "Stationary Bicycle", "type": "allan" },
					{ "text": "Couch", "type": "sierra" },
					{ "text": "Lamp", "type": "kailey" },
					{ "text": "Card Table", "type": "robbie" },
					{ "text": "Trampoline", "type": "emily" },
					{ "text": "Bed", "type": "jackie" },
					{ "text": "Chair", "type": "clayton" },
					{ "text": "Leather Recliner", "type": "janelle" },
					{ "text": "Popasan Chair", "type": "jesalyn" },
					]
				},
				{
				"question": "Dream Car?",
				"answers": [
					{ "text": "Twenty-three window 1962 VW Buss", "type": "kyle" },
					{ "text": "Tesla Model-S", "type": "tyler" },
					{ "text": "A Camel (Two Humps)", "type": "mason" },
					{ "text": "Jeep Rubicon", "type": "allan" },
					{ "text": "1968 Ford Bronco", "type": "sierra" },
					{ "text": "Black Jetta", "type": "kailey" },
					{ "text": "Honda Accord", "type": "robbie" },
					{ "text": "Lexus IS250", "type": "emily" },
					{ "text": "BMW 5 Series", "type": "jackie" },
					{ "text": "Mater (from Cars)", "type": "clayton" },
					{ "text": "BMW 7 Series", "type": "janelle" },
					{ "text": "Tiffanys-blue vintage Mustang", "type": "jesalyn" },
					]
				},
				{
				"question": "Favorite Disney Character?",
				"answers": [
					{ "text": "GusGus", "type": "kyle" },
					{ "text": "Luminere (candlestick)", "type": "tyler" },
					{ "text": "Mickey Mouse", "type": "mason" },
					{ "text": "Jasmine", "type": ["allan", "kailey", "jesalyn"] },
					{ "text": "Dorey", "type": "sierra" },
					{ "text": "Abu", "type": "robbie" },
					{ "text": "Marry Poppins", "type": "emily" },
					{ "text": "Donald Duck", "type": "jackie" },
					{ "text": "Mater (from Cars)", "type": "clayton" },
					{ "text": "Flower", "type": "janelle" },
					]
				}],
			"types" : {
				"kyle" : {
					"name" : "Kyle Kerchner",
					"desc" : "I\'m so sorry. No, but seriously... I\'m sorry for you. ",
					"img" : "images/kyle.jpg"
				},
				"tyler" : {
					"name" : "Tyler",
					"desc" : "You got Tyler Carter. You are most likely a San Diego local. You love the #20 from Cotijas. If given 3 hours of free time you would probably spend it making robots. Speaking of robots, you are not one. ",
					"img" : "images/tyler.jpg"
				},
				"mason" : {
					"name" : "Mason",
					"desc" : "You got Mason. The eternal optimist. You are sure that everything will always work out for the best, and it always does. You have a song of joy in your heart, and that song is the theme to pokemon.",
					"img" : "images/mason.jpg"
				},
				"allan" : {
					"name" : "Allan",
					"desc" : "You got Allan Schuler. You have a love of two wheeled things. Two wheeled transportation, two wheeled tacos, two wheeled friends. You are older than any of your friends, even if you are the same age. People probably write songs about your name because you are that special.",
					"img" : "images/allan.jpg"
				},
				"sierra" : {
					"name" : "Sierra",
					"desc" : "You got Sierra. If you got this because you chose the 1968 Bronco, you should be prouder than any other person in the history of mankind. If you got this because you chose to kick out Missouri you should be embarrassed. Missouri has given us George Washington Carver, Eminem, and Sheryl Crow. Also, you sing like a dolphin if dolphins were good singers.",
					"img" : "images/sierra.jpg"
				},
				"kailey" : {
					"name" : "Kailey",
					"desc" : "You got Kailey. Your heart will go on and on. You like the good simple things in life like happiness, bean and cheese burritos, and machine guns. Everyone likes you, because you are always nice, except to zombies… you kill zombies.",
					"img" : "images/kailey.jpg"
				},
				"robbie" : {
					"name" : "Robbie",
					"desc" : "You got Robbie. If you got Robbie because you chose the Honda Accord then you really are a Robbie. If you got him for another reason, well done. You are smart, dedicated, hard working, you think that Abu is funny, and the ladies swoon. ",
					"img" : "images/robbie.jpg"
				},
				"emily" : {
					"name" : "Emily",
					"desc" : "You got Emily. She picked Kansas to kick out by say “what one is in the middle? yeah, I don’t like that one” You are the life of any party, which makes sense when all that you eat is sugar packets. maybe all the sugar is why you are so sweet ;) ",
					"img" : "images/emily.jpg"
				},
				"jackie" : {
					"name" : "Jackie",
					"desc" : "You got Jackie. A firm hatred of state named based pick up lines mixed with a completely valid ignorance of all things Pokemon, you are Rad. You choose to jump your way to safety in zombie based fear situations, but you are cool and comfortable like a midday nap. Congrats on life.",
					"img" : "images/jackie.jpg"
				},
				"clayton" : {
					"name" : "Clayton",
					"desc" : "You got Clayton. You win. Chuck Norris, America, Cars. Seriously, you win.",
					"img" : "images/clayton.jpg"
				},
				"janelle" : {
					"name" : "Janelle",
					"desc" : "You got Janelle. Only you would have thought of a way to trick zombies into an incinerator. The brains of any operation, you appreciate the little things in life. Who but you could pick a skunk as your fav Disney friend?",
					"img" : "images/janelle.jpg"
				},
				"jesalyn" : {
					"name" : "Jesalyn",
					"desc" : "You got Jesalyn. Your nor-cal roots don't die easy. You know that soup ought never be eaten from a bowl that isn't also eatable. Cruising around in your girly colored vintage dream you know that value of relaxation and midi-chlorians. If you got Jesalyn you would not ask the question, \"what is a midi-chlorian?\"",
					"img" : "images/jesalyn.jpg"
				},
			},
			});
	</script>
	</body>
</html>
